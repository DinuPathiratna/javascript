<button id="btn">get coordinates</button>
<br><br>
<label for="latitude">My Latitude</label>
<input type="text" id="latitude" disabled>
<br><br>
<label for="longitude">My Longitude</label>
<input type="text" id="longitude" disabled>
<br><br>
<p>Information of your nearest city</p>
<label for="nearCity">City</label>
<input type="text" id="nearCity" disabled>
<br><br>
<label for="nearDistrict">District</label>
<input type="text" id="nearDistrict" disabled>
<br><br>
<label for="nearLongitude">Longitude</label>
<input type="text" id="nearLongitude" disabled>
<br><br>
<label for="nearLatitude">Latitude</label>
<input type="text" id="nearLatitude" disabled>
<br><br>
<label for="nearPostal">Postal</label>
<input type="text" id="nearPostal" disabled>

<script type="module">
    const cities = await fetch('cities.json').then(response => response.json());
    console.log(cities)

    function get_coordinates() {
        navigator.geolocation.getCurrentPosition(on_coordinates);
    }
    document.getElementById("btn").addEventListener("click", get_coordinates)

    function on_coordinates(data) {

        const myLt = data.coords.latitude;
        const myLn = data.coords.longitude;

        document.getElementById("latitude").value = myLt;
        document.getElementById("longitude").value = myLn;

        let min = Infinity
        let closestCity = null

        for (let i = 0; i < cities.length; i++) {
            const city = cities[i]
            const value = Math.abs(city.latitude - myLt) + Math.abs(city.longitude - myLn)
            if (min > value) {
                min = value
                closestCity = city
            }
        }
        const city = closestCity.city
        document.getElementById("nearCity").value = city;
        const district = closestCity.district 
         document.getElementById("nearDistrict").value = district;
        const latitude = closestCity.latitude
         document.getElementById("nearLatitude").value = latitude;
        const longitude = closestCity.longitude
         document.getElementById("nearLongitude").value = longitude;
        const postal = closestCity.postal
         document.getElementById("nearPostal").value = postal;

    }
</script>