
<button id="btn">get coordinates</button>
<br><br>
<label for="latitude">Latitude</label>
<input type="text" id="latitude" disabled>
<br><br>
<label for="longitude">Longitude</label>
<input type="text" id="longitude" disabled>

<script type="module">
    const cities = await fetch('cities.json').then(response => response.json());
    console.log(cities)

    function get_coordinates() {
        navigator.geolocation.getCurrentPosition(on_coordinates);
    }
    document.getElementById("btn").addEventListener("click", get_coordinates)

    function on_coordinates(data) {

        // my current coordinates
        const myLt = data.coords.latitude;
        const myLn = data.coords.longitude;

        // display my coordinates
        document.getElementById("latitude").value = myLt;
        document.getElementById("longitude").value = myLn;

        // starting minimum as larger value
        let min = Infinity
        // no selected closest city initially
        let closestCity = null

        // for each city
        for (let i = 0; i < cities.length; i++) {
            // current city item
            const city = cities[i]
            // calculate distance value between my coordinates and current city coordinates
            const value = Math.abs(city.latitude - myLt) + Math.abs(city.longitude - myLn)
            // check if current value is smaller than previous value
            if (min > value) {
                // remember as minimum value
                min = value
                // remember current city as the closest city
                closestCity = city
            }
        }

        // print closest city
        console.log(closestCity)
    }

</script>